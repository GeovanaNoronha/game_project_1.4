<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo de Domin√≥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e7e34, #28a745);
            color: white;
            overflow-x: hidden;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .score {
            text-align: center;
            font-size: 1.2em;
        }

        .game-board {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
        }

        .dealer-area {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .play-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            min-height: 200px;
        }

        .domino-chain {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
        }

        .player-area {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .domino {
            width: 50px;
            height: 100px;
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border: 2px solid #6c757d;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .domino:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        .domino.horizontal {
            width: 100px;
            height: 50px;
            flex-direction: row;
        }

        .domino.played {
            cursor: default;
            transform: none;
        }

        .domino.played:hover {
            transform: none;
        }

        .domino-half {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .domino.horizontal .domino-half {
            border-right: 1px solid #6c757d;
        }

        .domino.horizontal .domino-half:last-child {
            border-right: none;
        }

        .domino:not(.horizontal) .domino-half {
            border-bottom: 1px solid #6c757d;
        }

        .domino:not(.horizontal) .domino-half:last-child {
            border-bottom: none;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: #212529;
            border-radius: 50%;
            position: absolute;
        }

        .dealer-domino {
            background: #495057;
            border: 2px solid #343a40;
        }

        .dealer-domino .dot {
            background: #6c757d;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #0056b3;
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }

        .message {
            text-align: center;
            font-size: 1.5em;
            margin: 20px 0;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }

        .winner-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 40px;
            border-radius: 20px;
            font-size: 2em;
            text-align: center;
            z-index: 1000;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: bounceIn 0.8s ease-out;
        }

        @keyframes bounceIn {
            0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.05); }
            70% { transform: translate(-50%, -50%) scale(0.9); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .domino-animate {
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .thinking {
            font-style: italic;
            color: #ffc107;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üé≤ Jogo de Domin√≥ üé≤</h1>
            <div class="score-board">
                <div class="score">
                    <div>Dealer</div>
                    <div id="dealer-score">0</div>
                </div>
                <div class="score">
                    <div>Pe√ßas Restantes</div>
                    <div id="remaining-pieces">28</div>
                </div>
                <div class="score">
                    <div>Jogador</div>
                    <div id="player-score">0</div>
                </div>
            </div>
        </div>

        <div class="game-board">
            <div class="dealer-area" id="dealer-area">
                <div class="message">Dealer: <span id="dealer-count">7</span> pe√ßas</div>
            </div>

            <div class="play-area" id="play-area">
                <div class="domino-chain" id="domino-chain">
                    <div class="message">Clique em "Novo Jogo" para come√ßar</div>
                </div>
            </div>

            <div class="player-area" id="player-area">
                <!-- Pe√ßas do jogador aparecer√£o aqui -->
            </div>
        </div>

        <div class="controls">
            <button class="btn" id="new-game-btn">Novo Jogo</button>
            <button class="btn" id="pass-btn" disabled>Passar Vez</button>
            <button class="btn" id="draw-btn" disabled>Comprar Pe√ßa</button>
        </div>

        <div class="message" id="game-message">Bem-vindo ao Jogo de Domin√≥!</div>
    </div>

    <script>
        class DominoGame {
            constructor() {
                this.pieces = [];
                this.playerHand = [];
                this.dealerHand = [];
                this.playedPieces = [];
                this.stockPile = [];
                this.currentPlayer = 'player';
                this.gameOver = false;
                this.leftEnd = null;
                this.rightEnd = null;
                
                this.initializeElements();
                this.setupEventListeners();
            }

            initializeElements() {
                this.playerArea = document.getElementById('player-area');
                this.dealerArea = document.getElementById('dealer-area');
                this.playArea = document.getElementById('play-area');
                this.dominoChain = document.getElementById('domino-chain');
                this.gameMessage = document.getElementById('game-message');
                this.newGameBtn = document.getElementById('new-game-btn');
                this.passBtn = document.getElementById('pass-btn');
                this.drawBtn = document.getElementById('draw-btn');
                this.dealerCountEl = document.getElementById('dealer-count');
                this.remainingPiecesEl = document.getElementById('remaining-pieces');
                this.playerScoreEl = document.getElementById('player-score');
                this.dealerScoreEl = document.getElementById('dealer-score');
            }

            setupEventListeners() {
                this.newGameBtn.addEventListener('click', () => this.newGame());
                this.passBtn.addEventListener('click', () => this.passMove());
                this.drawBtn.addEventListener('click', () => this.drawPiece());
            }

            createDominoSet() {
                this.pieces = [];
                for (let i = 0; i <= 6; i++) {
                    for (let j = i; j <= 6; j++) {
                        this.pieces.push([i, j]);
                    }
                }
                this.shuffleArray(this.pieces);
            }

            shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            newGame() {
                this.gameOver = false;
                this.playedPieces = [];
                this.createDominoSet();
                
                this.playerHand = this.pieces.splice(0, 7);
                this.dealerHand = this.pieces.splice(0, 7);
                this.stockPile = [...this.pieces];
                
                this.currentPlayer = 'player';
                this.leftEnd = null;
                this.rightEnd = null;
                
                this.updateDisplay();
                this.updateMessage('Sua vez! Clique em uma pe√ßa para jogar.');
                
                this.newGameBtn.disabled = true;
                this.passBtn.disabled = false;
                this.drawBtn.disabled = false;
            }

            createDominoElement(piece, isDealer = false, isPlayed = false, orientation = 'vertical') {
                const domino = document.createElement('div');
                domino.className = `domino ${isPlayed ? 'played' : ''} ${isDealer ? 'dealer-domino' : ''}`;
                
                if (isPlayed && orientation === 'horizontal') {
                    domino.classList.add('horizontal');
                }
                
                // Para pe√ßas jogadas, ajustar a orienta√ß√£o baseada na l√≥gica do domin√≥
                if (isPlayed) {
                    if (orientation === 'horizontal') {
                        domino.innerHTML = `
                            <div class="domino-half">${this.createDots(piece[0])}</div>
                            <div class="domino-half">${this.createDots(piece[1])}</div>
                        `;
                    } else {
                        domino.innerHTML = `
                            <div class="domino-half">${this.createDots(piece[0])}</div>
                            <div class="domino-half">${this.createDots(piece[1])}</div>
                        `;
                    }
                } else {
                    domino.innerHTML = `
                        <div class="domino-half">${this.createDots(piece[0])}</div>
                        <div class="domino-half">${this.createDots(piece[1])}</div>
                    `;
                }
                
                if (!isDealer && !isPlayed) {
                    domino.addEventListener('click', () => this.playPiece(piece));
                }
                
                return domino;
            }

            createDots(number) {
                const patterns = {
                    0: '',
                    1: '<div class="dot" style="top: 50%; left: 50%; transform: translate(-50%, -50%);"></div>',
                    2: '<div class="dot" style="top: 25%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 75%; left: 75%; transform: translate(-50%, -50%);"></div>',
                    3: '<div class="dot" style="top: 25%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 50%; left: 50%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 75%; left: 75%; transform: translate(-50%, -50%);"></div>',
                    4: '<div class="dot" style="top: 25%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 25%; left: 75%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 75%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 75%; left: 75%; transform: translate(-50%, -50%);"></div>',
                    5: '<div class="dot" style="top: 25%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 25%; left: 75%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 50%; left: 50%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 75%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 75%; left: 75%; transform: translate(-50%, -50%);"></div>',
                    6: '<div class="dot" style="top: 25%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 25%; left: 75%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 50%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 50%; left: 75%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 75%; left: 25%; transform: translate(-50%, -50%);"></div><div class="dot" style="top: 75%; left: 75%; transform: translate(-50%, -50%);"></div>'
                };
                return patterns[number] || '';
            }

            playPiece(piece) {
                if (this.gameOver || this.currentPlayer !== 'player') return;
                
                if (this.canPlayPiece(piece)) {
                    this.addPieceToChain(piece);
                    this.playerHand = this.playerHand.filter(p => p !== piece);
                    this.updateDisplay();
                    
                    if (this.playerHand.length === 0) {
                        this.endGame('Voc√™ ganhou!');
                        return;
                    }
                    
                    this.currentPlayer = 'dealer';
                    this.updateMessage('Vez do dealer...');
                    
                    setTimeout(() => this.dealerMove(), 1000);
                } else {
                    this.updateMessage('Pe√ßa inv√°lida! Escolha uma pe√ßa que combine com as pontas: ' + this.leftEnd + ' ou ' + this.rightEnd);
                }
            }

            canPlayPiece(piece) {
                if (this.playedPieces.length === 0) return true;
                
                const [a, b] = piece;
                return a === this.leftEnd || a === this.rightEnd || 
                       b === this.leftEnd || b === this.rightEnd;
            }

            addPieceToChain(piece) {
                const [a, b] = piece;
                
                if (this.playedPieces.length === 0) {
                    // Primeira pe√ßa
                    this.playedPieces.push({
                        piece: piece,
                        position: 'center',
                        orientation: a === b ? 'horizontal' : 'vertical'
                    });
                    this.leftEnd = a;
                    this.rightEnd = b;
                } else {
                    // Determinar onde a pe√ßa deve ser colocada
                    let position, orientation, newLeftEnd = this.leftEnd, newRightEnd = this.rightEnd;
                    
                    if (a === this.leftEnd || b === this.leftEnd) {
                        // Pe√ßa vai na ponta esquerda
                        position = 'left';
                        if (a === this.leftEnd) {
                            newLeftEnd = b;
                            orientation = a === b ? 'horizontal' : 'vertical';
                        } else {
                            newLeftEnd = a;
                            orientation = a === b ? 'horizontal' : 'vertical';
                        }
                    } else if (a === this.rightEnd || b === this.rightEnd) {
                        // Pe√ßa vai na ponta direita
                        position = 'right';
                        if (a === this.rightEnd) {
                            newRightEnd = b;
                            orientation = a === b ? 'horizontal' : 'vertical';
                        } else {
                            newRightEnd = a;
                            orientation = a === b ? 'horizontal' : 'vertical';
                        }
                    }
                    
                    // Se √© uma carro√ßa (mesma quantidade de pontos), posicionar ao lado
                    if (a === b) {
                        orientation = 'horizontal';
                    }
                    
                    if (position === 'left') {
                        this.playedPieces.unshift({
                            piece: piece,
                            position: position,
                            orientation: orientation
                        });
                    } else {
                        this.playedPieces.push({
                            piece: piece,
                            position: position,
                            orientation: orientation
                        });
                    }
                    
                    this.leftEnd = newLeftEnd;
                    this.rightEnd = newRightEnd;
                }
            }

            dealerMove() {
                if (this.gameOver) return;
                
                const playablePieces = this.dealerHand.filter(piece => this.canPlayPiece(piece));
                
                if (playablePieces.length > 0) {
                    const randomPiece = playablePieces[Math.floor(Math.random() * playablePieces.length)];
                    this.addPieceToChain(randomPiece);
                    this.dealerHand = this.dealerHand.filter(p => p !== randomPiece);
                    
                    this.updateDisplay();
                    this.updateMessage(`Dealer jogou [${randomPiece[0]}|${randomPiece[1]}]. Sua vez!`);
                    
                    if (this.dealerHand.length === 0) {
                        this.endGame('Dealer ganhou!');
                        return;
                    }
                    
                    this.currentPlayer = 'player';
                } else {
                    if (this.stockPile.length > 0) {
                        const newPiece = this.stockPile.pop();
                        this.dealerHand.push(newPiece);
                        this.updateDisplay();
                        this.updateMessage('Dealer comprou uma pe√ßa...');
                        setTimeout(() => this.dealerMove(), 1000);
                    } else {
                        this.updateMessage('Dealer passou a vez. Sua vez!');
                        this.currentPlayer = 'player';
                    }
                }
            }

            passMove() {
                if (this.gameOver) return;
                
                if (this.currentPlayer === 'player') {
                    this.currentPlayer = 'dealer';
                    this.updateMessage('Voc√™ passou a vez. Vez do dealer...');
                    setTimeout(() => this.dealerMove(), 1000);
                }
            }

            drawPiece() {
                if (this.gameOver || this.currentPlayer !== 'player' || this.stockPile.length === 0) return;
                
                const newPiece = this.stockPile.pop();
                this.playerHand.push(newPiece);
                this.updateDisplay();
                this.updateMessage('Voc√™ comprou uma pe√ßa!');
            }

            updateDisplay() {
                // Atualizar √°rea do jogador
                this.playerArea.innerHTML = '';
                this.playerHand.forEach(piece => {
                    const domino = this.createDominoElement(piece);
                    domino.classList.add('domino-animate');
                    this.playerArea.appendChild(domino);
                });
                
                // Atualizar √°rea do dealer
                this.dealerCountEl.textContent = this.dealerHand.length;
                
                // Atualizar cadeia de pe√ßas jogadas
                this.dominoChain.innerHTML = '';
                if (this.playedPieces.length === 0) {
                    this.dominoChain.innerHTML = '<div class="message">Mesa vazia - Jogue a primeira pe√ßa!</div>';
                } else {
                    this.playedPieces.forEach(pieceData => {
                        const domino = this.createDominoElement(pieceData.piece, false, true, pieceData.orientation);
                        this.dominoChain.appendChild(domino);
                    });
                    
                    // Mostrar as pontas dispon√≠veis
                    const endsMessage = document.createElement('div');
                    endsMessage.className = 'message';
                    endsMessage.style.fontSize = '1em';
                    endsMessage.style.marginTop = '10px';
                    endsMessage.textContent = `Pontas dispon√≠veis: ${this.leftEnd} e ${this.rightEnd}`;
                    this.dominoChain.appendChild(endsMessage);
                }
                
                // Atualizar contadores
                this.remainingPiecesEl.textContent = this.stockPile.length;
                this.playerScoreEl.textContent = this.playerHand.length;
                this.dealerScoreEl.textContent = this.dealerHand.length;
                
                // Atualizar bot√µes
                this.drawBtn.disabled = this.stockPile.length === 0 || this.currentPlayer !== 'player';
                this.passBtn.disabled = this.currentPlayer !== 'player' || this.gameOver;
            }

            updateMessage(message) {
                this.gameMessage.textContent = message;
            }

            endGame(message) {
                this.gameOver = true;
                this.newGameBtn.disabled = false;
                this.passBtn.disabled = true;
                this.drawBtn.disabled = true;
                
                // Criar overlay
                const overlay = document.createElement('div');
                overlay.className = 'overlay';
                document.body.appendChild(overlay);
                
                // Criar mensagem de vit√≥ria
                const winnerMessage = document.createElement('div');
                winnerMessage.className = 'winner-message';
                winnerMessage.innerHTML = `
                    <h2>üéâ ${message} üéâ</h2>
                    <p>Clique em "Novo Jogo" para jogar novamente!</p>
                `;
                document.body.appendChild(winnerMessage);
                
                // Remover ap√≥s 3 segundos
                setTimeout(() => {
                    if (overlay && overlay.parentNode) {
                        overlay.parentNode.removeChild(overlay);
                    }
                    if (winnerMessage && winnerMessage.parentNode) {
                        winnerMessage.parentNode.removeChild(winnerMessage);
                    }
                }, 3000);
            }
        }

        // Inicializar o jogo
        const game = new DominoGame();
    </script>
</body>
</html>